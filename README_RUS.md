UNIVERSAL WRAPPER PIPELINE SETTINGS
===================================

Набор конфигураций для 
[universal wrapper pipeline](https://github.com/alexanderbazhenoff/jenkins-universal-wrapper-pipeline). Для ознакомления
с функционалом pipeline'а можно перейти по
[этой](https://github.com/alexanderbazhenoff/jenkins-universal-wrapper-pipeline) ссылке, ниже будет представлено 
подробное описание непосредственно самого формата
[конфигурационных файлов](https://github.com/alexanderbazhenoff/jenkins-universal-wrapper-pipeline). 

Конфигурационный файл Universal Wrapper Pipeline должен соответствовать всем
[стандартам yaml-синтаксиса](https://yaml.org/). На каждый wrapper pipeline - один файл (но возможны исключения, при
которых с помощью [регулярных выражений](#пример-1) один конфигурационный файл может конфигурировать несколько копий
wrapper pipeline'ов c разными именами).

# Имена конфигурационных файлов

Файл конфигурации с именем `имя-пайлайна.yaml` и по-умолчанию располагаться внутри репозитория по пути `settings/` 
(можно задать константой pipeline'а `PipelineNameRegexReplace`). В имени pipeline'а допускаются всевозможные префиксы и
постфиксы, а для их удаления и приведения к соответствию к имени конфигурационного файла есть константа pipeline'а 
`PipelineNameRegexReplace`, содержащая список регулярных выражений, совпадения из которого будут удалены из имени 
pipeline'а при формировании имени конфигурационного файла.

#### Пример 1

Константа в pipeline имеет следующее значение:
```groovy
final PipelineNameRegexReplace = ['^(admin|devops|qa)_'] as ArrayList
```
Следовательно, pipeline'ы с именами:
`admin_example-pipeline`, `devops_example-pipeline` и `qa_example-pipeline` будут ссылаться на один и тот же
конфигурационный файл `example-pipeline.yaml`.

*Регулярные выражения и задание пути внутри репозитория предназначены исключительно для упрощения структуризации
конфигурационных файлов внутри репозитория. Можно оставить путь по-умолчанию, а список регулярных выражений - пустым,
тогда конфигурационные файлы будут располагаться: `settings/admin_example-pipeline.yaml`,
`settings/devops_example-pipeline.yaml` и `settings/qa_example-pipeline.yaml` соответственно.*

# Основные ключи конфигурационных файлов

- [**parameters**](#ключ-parameters) `[словарь]` *(обязательный, если pipeline параметризованный)* - параметры pipeline.
- [**stages**](#ключ-stages) `[словарь]` *(обязательный)* - стадии pipeline, содержащие список действий, каждый из
которых ссылается на уникальное в рамках pipeline название действия (action name) из ключа [actions](#ключ-actioins).
- [**actions**](#actions) `[словарь]` *(обязательный)* - описание действий, которые так же могут ссылаться на playbook
и inventory из ключей [playbooks](#ключ-playbooks) и [inventories](#ключ-inventories), или на скрипт из ключа
[scripts](#ключ-scripts).
- [**scripts**](#ключ-scripts) `[словарь]` *(необязательный)* - ключ, содержащий скрипты, которые будут запущены при
выполнении соответствующего action'а.
- [**playbooks**](#ключ-playbooks) `[словарь]` *(необязательный)* - ключ, содержащий ansible playbooks, которые будут
запущены при выполнении соответствующего action'а.
- [**inventories**](#ключ-inventories) `[словарь]` *(необязательный)* - ключ, содержащий ansible playbooks, которые
будут запущены при выполнении соответствующего action'а. При наличии ключа playbooks наличие 
[ключа inventories](#ключ-inventories) и хотя бы одного inventory с именем `default` является обязательным.  

## Ключ parameters

Параметры pipeline делятся на три типа:

  - [**required**](#required) `[список]` - обязательные параметры, без указания которых текущий запуск pipeline
    завершится c ошибкой. Можно так же настроить, чтобы вместо ошибки выводилось предупреждение, или подставлялось
  значение из другого параметра.
  - [**optional**](#optional) `[список]` - опциональные параметры, которые можно указывать по мере необходимости.
  Pipeline может не иметь обязательных параметров (ключ [required](#required)), то все они могут быть размещены в
  [optional](#optional).
  - **built-in** - "встроенные" параметры: `SETTINGS_GIT_BRANCH`, `NODE_NAME`, `NODE_TAG`, `UPDATE_PARAMETERS`,
    `DRY_RUN`, `DEBUG_MODE`. Эти параметры уже встроены непосредственно в код pipeline (константа 
    `BuiltinPipelineParameters`), задавать их в файле конфигурации не нужно.
  
  Если хотя бы один из приведенных в конфигурационном файле параметров pipeline отсутствует в параметрах pipeline в его
  настройках, то все параметры pipeline будут заново синхронизированы с параметрами в конфигурационном файле. Сравнение
  производится только по именам параметров, тип, значения по умолчанию и другие ключи параметров игнорируются.

### Required

Список параметров, каждый из которых имеет следующие ключи:

- **name** `[строка]` - имя параметра pipeline.
- **type** `[строка]` - тип параметра, который полностью соответствует типам параметров для jenkins pipeline. Варианты:
  `string` (строковый), `text` (многострочный), `password`, `choice`, `boolean`.
- **description** `[строка]` - описание параметра.

### Optional
